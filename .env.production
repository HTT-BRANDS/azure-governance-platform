# =============================================================================
# Azure Governance Platform - Production Environment Template
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit the .env file to version control!
#
# Required variables are marked with [REQUIRED]
# Optional variables are marked with [OPTIONAL]
# =============================================================================

# =============================================================================
# Environment Configuration [REQUIRED]
# =============================================================================
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# =============================================================================
# Azure Authentication [REQUIRED]
# =============================================================================
# These are the credentials for the Azure Service Principal
# that the platform uses to access Azure resources
AZURE_TENANT_ID=your-tenant-id-here
AZURE_CLIENT_ID=your-service-principal-client-id
AZURE_CLIENT_SECRET=your-service-principal-secret

# =============================================================================
# Azure AD / Entra ID OAuth2 Configuration [OPTIONAL]
# =============================================================================
# Use these if you want to enable Azure AD authentication for users
AZURE_AD_TENANT_ID=your-tenant-id-here
AZURE_AD_CLIENT_ID=your-app-registration-client-id
AZURE_AD_CLIENT_SECRET=your-app-registration-secret

# OAuth2 Scopes (comma-separated)
OAUTH2_SCOPES=openid,profile,email,User.Read

# =============================================================================
# Database Configuration [REQUIRED - Choose one]
# =============================================================================

# Option 1: SQLite (simplest, good for MVP)
# The database will be stored in persistent Azure Files storage
DATABASE_URL=sqlite:///home/data/governance.db

# Option 2: Azure SQL Database (recommended for production)
# Uncomment and configure if using Azure SQL
# DATABASE_URL=mssql+pyodbc://username:password@server.database.windows.net:1433/database?driver=ODBC+Driver+18+for+SQL+Server&Encrypt=yes

# Database connection pool settings (for Azure SQL)
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
SLOW_QUERY_THRESHOLD_MS=500.0
ENABLE_QUERY_LOGGING=false

# =============================================================================
# Azure Key Vault [OPTIONAL but RECOMMENDED]
# =============================================================================
# Store sensitive credentials in Key Vault instead of environment variables
KEY_VAULT_URL=https://your-keyvault-name.vault.azure.net/

# =============================================================================
# Multi-Tenant Configuration [OPTIONAL]
# =============================================================================
# Comma-separated list of tenant IDs to manage
# MANAGED_TENANT_IDS=tenant-id-1,tenant-id-2,tenant-id-3

# =============================================================================
# Sync Configuration [OPTIONAL]
# =============================================================================
# How often to sync data from Azure (in hours)
COST_SYNC_INTERVAL_HOURS=24
COMPLIANCE_SYNC_INTERVAL_HOURS=4
RESOURCE_SYNC_INTERVAL_HOURS=1
IDENTITY_SYNC_INTERVAL_HOURS=24

# =============================================================================
# Performance & Bulk Operations [OPTIONAL]
# =============================================================================
BULK_BATCH_SIZE=1000
SYNC_CHUNK_SIZE=1000
ENABLE_PARALLEL_SYNC=true
MAX_PARALLEL_TENANTS=5

# =============================================================================
# Caching Configuration [OPTIONAL]
# =============================================================================
CACHE_ENABLED=true
# REDIS_URL=rediss://your-redis-cache.redis.cache.windows.net:6380
CACHE_TTL_COST_SUMMARY=3600
CACHE_TTL_COMPLIANCE_SUMMARY=1800
CACHE_TTL_RESOURCE_INVENTORY=900
CACHE_TTL_IDENTITY_SUMMARY=3600
CACHE_TTL_RIVERSIDE_SUMMARY=900

# =============================================================================
# Notifications & Alerting [OPTIONAL]
# =============================================================================
NOTIFICATION_ENABLED=true
NOTIFICATION_MIN_SEVERITY=warning
NOTIFICATION_COOLDOWN_MINUTES=30

# Microsoft Teams webhook URL for alerts
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/...

# Thresholds for alerting
COST_ANOMALY_THRESHOLD_PERCENT=20.0
COMPLIANCE_ALERT_THRESHOLD_PERCENT=5.0

# =============================================================================
# Security Configuration [REQUIRED for Production]
# =============================================================================
# CORS Origins - CRITICAL: Must be explicitly set in production
# Comma-separated list of allowed origins (no wildcards!)
CORS_ORIGINS=https://your-domain.com,https://admin.your-domain.com

# JWT Configuration
JWT_SECRET_KEY=generate-a-secure-random-key-here-min-32-chars
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# Riverside Compliance Configuration [OPTIONAL]
# =============================================================================
RIVERSIDE_COMPLIANCE_ENABLED=false
RIVERSIDE_DEADLINE_DATE=2026-07-08
RIVERSIDE_MFA_TARGET=100
RIVERSIDE_MATURITY_TARGET=3.0
RIVERSIDE_SYNC_INTERVAL_HOURS=4

# =============================================================================
# Application Insights [OPTIONAL]
# =============================================================================
# Connection string is auto-configured in Azure App Service
# APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=...

# =============================================================================
# Server Configuration [OPTIONAL - Usually auto-configured]
# =============================================================================
HOST=0.0.0.0
PORT=8000

# =============================================================================
# Notes
# =============================================================================
# 1. Generate a secure JWT secret key:
#    python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# 2. For Azure App Service, most settings should be configured
#    in the Azure Portal under Configuration > Application settings
#
# 3. Sensitive values should be stored in Azure Key Vault
#    and referenced via the KEY_VAULT_URL
#
# 4. This file is a template - copy to .env and customize for your deployment
